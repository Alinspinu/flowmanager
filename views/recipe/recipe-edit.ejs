<% layout('layouts/boilerplate') %>

    <div class="row">
        <div class="col-lg-6 offset-lg-3" id="container">
            <i class="bi bi-backspace" id="back"></i>
            <h5 class="text-center mt-3 mb-5"><%=recipe.name %></h5>
         
            <div class="form-container">
            <form action="/recipes/<%=recipe._id%>?_method=PUT" method="POST" novalidate class="validated-form">
              <div class="label-name">
                <span>Recipe name</span>
                <span id="lastLabel">Recipe volume</span>
              </div>
                <div class="input-group mb-3">
                  <input type="text" class="form-control" id="name" name="recipe[name]" aria-describedby="name" value="<%=recipe.name%> " required>
                  <input type="text" class="form-control" id="name" name="recipe[totalVolume]" aria-describedby="name" value=" <%=recipe.totalVolume%> " required>
                </div>
                <div class="label-name">
                  <span>Method</span>
                </div>
                <div class="input-group mb-3">
                    <input type="text" class="form-control" id="method-name" aria-describedby="method-name" name="recipe[method][name]" value="<%=recipe.method.name%>" required>
                </div>
                <div class="label-name">
                  <span>Recipent type</span>
                  <span id="lastLabel">Garnish</span>
                </div>
                <div class="input-group mb-3">
                    <input type="text" class="form-control" id="recipent" name="recipe[recipent]" aria-describedby="recipent" value="<%=recipe.recipent%>"  required>
                    <input type="text" class="form-control" id="garnish" name="recipe[garnish]" aria-describedby="recipent" value="<%=recipe.garnish%>" required>
                </div>
                <div class="label-name">
                  <span>Grinder Step</span>
                  <span id="secondLabel">Brew Time</span>
                  <span id="thirdLabel">Water Â°C</span>
                </div>
                <div class="coffee-setup">
                    <div class="input-group mb-3">
                        <input type="text" class="form-control"  name="recipe[grinderStep]" aria-describedby="grinder-step" value="<%=recipe.grinderStep%>" >
                        <input type="text" class="form-control" name="recipe[brewTime]" aria-describedby="brew-time" value="<%=recipe.brewTime%>">
                        <input type="text" class="form-control" name="recipe[waterTemp]" aria-describedby="water-temperature" value="<%=recipe.waterTemp%>">
                    </div>
                </div>
                <div class="label-name">
                  <span>Ingredient</span>
                  <span id="ingSecond">Um</span>
                  <span id="ingThird">Qty</span>
                </div>
                <div id="ingContainer">
                    <% recipe.ingredients.forEach(ingredient => { %>
                  <div class="input-group mb-3">
                    <input type="text" class="form-control" style="width:47%;" id="ingredient"  name="recipe[ingredients][name]" value=" <%=ingredient.name%> " required>
                    <input type="text" class="form-control"  name="recipe[ingredients][um]" value="<%=ingredient.um%>" required>
                    <input type="text" class="form-control px-2" name="recipe[ingredients][quantity]" value=" <%=ingredient.quantity%>" required>
                    <button type="button" class="btn bg-middle removeIng">x</button>
                    </div>
                    <% }) %>
                </div>
                <button type="button" class="btn bg-middle addIngredient mb-3" style="width: 100%;" id="">+ Ingredient</button>
                <div class="label-name">
                  <span> Description</span>
                </div>
                  <div class="mb-3">
                    <textarea type="text" class="form-control" id="method-description" aria-describedby="method-description" name="recipe[method][description]" required> <%=recipe.method.description%></textarea>
                    <div id="method-description" class="form-text">Describe the workflow in detail</div>
                  </div>
                <button type="submit" class="btn bg-gray mb-3" style="width:100%;">Modify Recipe</button>
              </form>
              </div>    
        </div>
    </div>

    <script src="/javascripts/recipe-edit.js"></script>